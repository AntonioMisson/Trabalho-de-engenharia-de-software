<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Editar Perfil</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <div class="container" style="display: flex; gap: 40px; max-width: 900px;">

    <!-- Sidebar do perfil -->
    <aside class="sidebar" style="position: relative; height: auto; width: 220px;">
      <div style="text-align: center; padding: 20px;">
        <p style="margin-bottom: 20px;">{{ usuario }}</p>

        <!-- Foto de perfil (real, se existir) -->
        <img
          id="preview"
          src="{{ url_for('static', filename='fotos/' + dados.get('foto', 'placeholder.png')) }}"
          alt="Foto de perfil"
          style="border-radius: 50%; margin-bottom: 20px; width: 100px; height: 100px;"
        >

        <!-- Input escondido para upload -->
        <input type="file" id="fotoInput" name="foto" accept=".png" style="display: none;" onchange="previewFoto(event)">

        <!-- Botão para selecionar a imagem -->
        <button type="button" onclick="document.getElementById('fotoInput').click()" style="background-color: gray; padding: 10px 14px; border-radius: 8px;">
          Mudar foto (.png)
        </button>
      </div>

      <script>
      function previewFoto(event) {
        const file = event.target.files[0];
        if (file && file.type === "image/png") {
          const reader = new FileReader();
          reader.onload = function(e) {
            document.getElementById("preview").src = e.target.result;
          }
          reader.readAsDataURL(file);
        } else {
          alert("Por favor, selecione apenas arquivos .png");
          event.target.value = ""; // limpa o campo
        }
      }
      </script>
    </aside>

    <!-- Formulário de edição -->
    <main style="flex: 1;">
      <form method="POST" action="{{ url_for('perfil') }}" enctype="multipart/form-data">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" value="{{ dados.get('nome', '') }}" required>

        <label for="telefone">Telefone:</label>
        <input type="text" id="telefone" name="telefone" value="{{ dados.get('telefone', '') }}" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="{{ dados.get('email', '') }}" required>

        <label for="curso">Curso:</label>
        <input type="text" id="curso" name="curso" value="{{ dados.get('curso', '') }}" required>

        <div style="margin-top: 20px;">
          <a href="{{ url_for('main') }}" class="btn">Voltar</a>
          <button type="submit" class="btn">Salvar</button>
        </div>
      </form>
    </main>
  </div>

</body>
</html>
